<html>
<head>

<meta charset="utf-8" />

<link rel="stylesheet" type="text/css" href="styles/base.css" />
<link id="csscolor" rel="stylesheet" type="text/css" href="styles/colors/default/colors.css" />
<link id="cssstyle" rel="stylesheet" type="text/css" href="styles/designs/default.css" />

</head>
<body>

<script src="js/ben0biJSLoader.js"></script>

<script>

// ARRAY with the work & materials
var offertItem = function(text, price, count = 1)
{
	this.text = text;
	this.price = price;
	this.count = count;
	this.getTotal = function() {return this.price * this.count;}
}

// add a work item to the array.
function addWork(text, price)
{
	var it = new offertItem(text, price, 1);
	m_workArray.push(it);
	refresh();
}

// add a material item to the array.
function addMaterial(text, pricePerItem, count)
{
	var it = new offertItem(text, pricePerItem, count)
	m_materialArray.push(it);
}

// refresh the window with the new items.
function refresh() {}

var m_workArray = [];
var m_materialArray = [];

// ELEMENTS
var m_content='';
var m_go0Div = '';
var m_go1Div = '';

var m_workDiv = ''; // the div with the work and materials in it.

function showOffertWindow(contentIDorClass)
{
	m_content = jQuery.getNewDiv('', 'BeOffert_WINDOW_editor');
	var title = jQuery.getNewDiv(L("title_offert_window"),'BeOffert_editor_title');
	
// GO 0: Address of customer and offert title and times.
	m_go0Div = jQuery.getNewDiv('', 'BeOffert_DIV_GO0');
	
	// OFFERTE
	var offertDiv = jQuery.getNewDiv('', 'BeOffert_DIV_title','offertdiv');
	var offertTitle = jQuery.getNewInput('',L("placeholder_offert_title"),'BeOffert_editor_input_title');	
	var offertNumber = jQuery.getNewInput('', L("placeholder_offert_refnumber"), 'BeOffert_editor_input_number');

	$(offertDiv).append(offertTitle);
	$(offertDiv).append(offertNumber);

	// CUSTOMER
	var customerDiv = jQuery.getNewDiv('','BeOffert_DIV_customer', 'offertdiv');
	var offertCustomerTitle = jQuery.getNewDiv(L("title_offert_customer"),'BeOffert_editor_title_customer');
	
	var offertCustomerName = jQuery.getNewInput('', L("placeholder_offert_customer_name"), 'BeOffert_editor_input_customername');
	var offertCustomerAdress1 = jQuery.getNewInput('', L("placeholder_offert_customer_address"), 'BeOffert_editor_input_customeradress1');

	/*var offertCustomerAdress2 = jQuery.getNewElement('input', 'BeOffert_editor_input_customeradress2');
	$(offertCustomerAdress2).attr('placeholder', 'Adresse (Special)');*/

	var offertCustomerCity = jQuery.getNewInput('',L("placeholder_offert_customer_city"), 'BeOffert_editor_input_customercity');
	var offertCustomerPhone = jQuery.getNewInput('', L("placeholder_offert_customer_phone"), 'BeOffert_editor_input_customerphone');

	$(customerDiv).append(offertCustomerTitle);	
	$(customerDiv).append(offertCustomerName);
	$(customerDiv).append(offertCustomerAdress1);
	//$(m_customerDiv).append(offertCustomerAdress2);
	$(customerDiv).append(offertCustomerCity);
	$(customerDiv).append(offertCustomerPhone);

	// TARGET ADRESS
	var targetDiv = jQuery.getNewDiv('','BeOffert_DIV_target','offertdiv');
	var offertTargetAdressTitle = jQuery.getNewDiv(L("title_offert_target"),'BeOffert_editor_title_customer');

	var offertTargetAdress = jQuery.getNewInput('', L("placeholder_offert_target_address"), 'BeOffert_editor_input_targetadress');
	var offertTargetCity = jQuery.getNewInput('', L("placeholder_offert_target_city"), 'BeOffert_editor_input_targetcity');
	
	$(targetDiv).append(offertTargetAdressTitle);
	$(targetDiv).append(offertTargetAdress);
	$(targetDiv).append(offertTargetCity);
	
	// BUTTONS
	var btnDiv = jQuery.getNewDiv('','', 'offertbtns offertdiv');
	var goBtn1 = jQuery.getNewJSButton('--&gt;','go(1)', '', 'btn');
	btnDiv.append(goBtn1);
	
	$(m_go0Div).append(btnDiv);		
	$(m_go0Div).append(offertDiv);
	$(m_go0Div).append(customerDiv);
	$(m_go0Div).append(targetDiv);

// GO 1: Add work & materials
	m_go1Div = jQuery.getNewDiv('','BeOffert_DIV_GO1');
	m_workDiv = jQuery.getNewDiv('', 'BeOffert_DIV_workwindow');

	var btnDiv2 = jQuery.getNewDiv('','BeOffert_editor_go1buttons', 'offertbtns offertdiv');
	var backBtn0 = jQuery.getNewJSButton('&lt;--','go(0)', '', 'btn');
	var goBtn2 = jQuery.getNewJSButton('--&gt;','go(2)', '', 'btn');
	btnDiv2.append(backBtn0);
	btnDiv2.append(goBtn2);
		
	$(m_go1Div).append(btnDiv2);
	$(m_go1Div).append(m_workDiv);
	
// ADD the windows to the content.
	$(m_content).append(title);
	$(m_content).append(m_go0Div);
	$(m_content).append(m_go1Div);
	
// Add the content to the window.
	jQuery.appendElementTo(contentIDorClass,m_content);

// Set some heights.
	var workheight= $(m_content).height();
	var h1= jQuery.getRealHeight('BeOffert_editor_title');
	var h2 = jQuery.getRealHeight('BeOffert_editor_go1buttons');
		
	workheight = workheight-h1-h2;
	$(m_workDiv).height(workheight);
	
	// Hide the windows.
	$(m_go1Div).hide();
}

function go(part)
{
	switch(part)
	{
		case 0:
			console.log("Go 0: Show title and customer adresses.");
			$(m_go1Div).hide();			
			$(m_go0Div).show();
			break;
		case 1:
			console.log("Go 1: Show Material & Work window.");
			$(m_go0Div).hide();
			//$(m_go2Div).hide();
			
			$(m_go1Div).show();
			break;
		default:
			break;
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// called after the js files have loaded.
function initpage()
{
	initpage_default(init_afterLangLoaded);
}

// called after the language file has loaded.
function init_afterLangLoaded()
{
	showOffertWindow('#content');
}

ben0biJSLoader.recursiveLoad('config/jsfiles.json', initpage);

</script>


</body>
</html>